---
// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.

import stockData from '../data/stock.json'
import StockAccordion from '../components/StockAccordion.astro';
import SearchBar from '../components/SearchBar.astro';

const searchTerm = Astro.url.searchParams.get('q') || '';
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Pok√©dex</title>
  </head>

  <body>
    <div class="header-container">
      <h1 class="header-title">Stock</h1>

      <div class="search-container">
        <SearchBar searchTerm={searchTerm} />
      </div>
    </div>

    <div class="stock-accordion">
      {stockData.stock.map(stock => (
        <StockAccordion
          NUMERO={stock.NUMERO}
          DESCRIPCION={stock.DESCRIPCION}
          STOCK={stock.STOCK}
          NOMBRE_MARCA={stock.NOMBRE_MARCA}
          PRECIO_VENTA={stock.PRECIO_VENTA}
          NOMBRE_IMAGEN={stock.NOMBRE_IMAGEN}
        />
      ))}
    </div>
    
  </body>
</html>

<style>
  .header-container {
    position: sticky;
    top: 0;
    background: #566c92;
    z-index: 100;
    display: grid;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding: 0 1rem;
    gap: 1rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    grid-template-columns: 1fr auto 1fr;
  }
  
  .header-title {
    justify-self: start;
  }
  
  .search-container {
    justify-self: center;
    width: 100%;
    max-width: 400px;
  }
  
  .stock-accordion {
    display: block;
    max-width: 600px;
    margin: 0 auto;
    padding: 1rem;
  }

  body {
    background-color: #4a5568;
  }
</style>